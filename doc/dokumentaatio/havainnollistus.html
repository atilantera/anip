<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fi" lang="fi">
<head>
<title>Animaatiotiedostojen pakkaaja - Lis‰havainnollistus dokumentaatioon 
- Artturi Tilanter‰
</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="css/tyyli.css" rel="stylesheet" type="text/css" />
</head>
<body>

<h1>Paletti- ja muutostiivist‰v‰ animaatiotiedostojen pakkaaja</h1>

<h2>Dokumentaatioliite: Videonpakkauksen n‰kyvi‰ p‰‰periaatteita havainnollistava kuvasarja</h2>

<p>T‰m‰ dokumentaation liite havainnollistaa videonpakkauksen
silmin n‰ht‰vi‰, osin h‰viˆllisi‰ vaiheita, joissa liikkuvaa kuvaa
pakataan tunnistamalla muutoksia ja v‰hent‰m‰ll‰ v‰ri-informaatiota
kuvissa ja niiden osa-alueissa.</p>

<table>

<tr>
<td colspan="2"><a name="testikuvat">1 Kaksi testikuvaa, jotka esitt‰v‰t
kahta per‰kk‰ist‰, erilaista kuvaa animaatiossa.</a></td>
</tr>

<tr>
<td>
1.1 Edellinen kuva, pakkaamaton RGB 24 bitti‰/pikseli</td>
<td>1.2 Nykyinen kuva, pakkaamaton RGB 24 bitti‰/pikseli</td>
</tr>

<tr>
<td><img src="kuvat/alkup-0.png" alt="Edellinen alkuper‰inen
24-bittinen kuva" /></td>
<td><img src="kuvat/alkup-1.png" alt="Nykyinen alkuper‰inen
24-bittinen kuva" /></td>
</tr>


<tr>
<td colspan="2"><a name="muuttuneet_lohkot">
2 Muuttuneet 8 x 8 pikselin lohkot.</a></td>
</tr>

<tr>
<td colspan="2">2.1 Muuttuneet lohkot, kun muuttuvuusperuste on jonkin
lohkon pikselin v‰rimuutoksen pituus RGB-avaruudessa minimiarvolla 8.
Kuvaan valikoituu melko tarkasti ne alueet, joiden muutoksen huomaa
paljaalla silm‰ll‰. Osa poskea ja paitaa todella sattuvat pysym‰‰n
samanv‰risin‰. P‰‰n ymp‰rill‰ on taustaa mukana hiusten heilahtamisen
takia.</td>
</tr>

<tr>
<td><img src="kuvat/muutos-rgb-etaisyys-8.png" alt="Muuttuneet lohkot
RGB-et‰isyydell‰ 8" /></td>
<td><img src="kuvat/muutos-rgb-etaisyys-8-kuvassa.png"
alt="Muuttuneet lohkot RGB-et‰isyydell‰ 8 edellisen kuvan p‰‰ll‰" /></td>
</tr>

<tr>
<td colspan="2">2.2 Muuttuneet lohkot RGB-minimiet‰isyydell‰ 16.
Nyt valkoinen muki on riitt‰v‰n samanv‰rinen kuin valkoinen tausta, kun
se osuu samalle kohtaa. Sen sijaan hiuksissa on havaittavissa pient‰
palikoitumista, kun jotkin lohkot eiv‰t muutu.</td> 
</tr>

<tr>
<td><img src="kuvat/muutos-rgb-etaisyys-16.png" alt="Muuttuneet lohkot
RGB-et‰isyydell‰ 16" /></td>
<td><img src="kuvat/muutos-rgb-etaisyys-16-kuvassa.png"
alt="Muuttuneet lohkot RGB-et‰isyydell‰ 16 edellisen kuvan p‰‰ll‰" /></td>
</tr>

<tr>
<td colspan="2">2.3 Muuttuneet lohkot RGB-minimiet‰isyydell‰ 24.
Palikoituminen korostuu hiuksissa. Erityisen huomattavaa on, ett‰
h‰iritsev‰ palikoituminen n‰ytt‰‰ kasvavan nopeammin kuin muuttuvien
lohkojen m‰‰r‰ v‰henee; et‰isyydell‰ 24 on jo silm‰‰npist‰vi‰ h‰iriˆit‰,
mutta lohkojen m‰‰r‰ ei v‰hene mitenk‰‰n olennaisesti, mik‰ olisi hyv‰
asia pakkauksen kannalta.</td> 
</tr>

<tr>
<td><img src="kuvat/muutos-rgb-etaisyys-24.png" alt="Muuttuneet lohkot
RGB-et‰isyydell‰ 24" /></td>
<td><img src="kuvat/muutos-rgb-etaisyys-24-kuvassa.png"
alt="Muuttuneet lohkot RGB-et‰isyydell‰ 24 edellisen kuvan p‰‰ll‰" /></td>
</tr>

<tr>
<td colspan="2"><a name="kuvapaletti">
3 Koko kuvalle yhteinen v‰ripaletti.</a></td>
</tr>

<tr>
<td>3.1 Kuva, jolle on muodostettu optimaalinen 256 v‰rin paletti
median cut -menetelm‰ll‰, ja sen j‰lkeen sovitettu paletti k‰ytt‰m‰ll‰
perusteena kuvan ja paletin v‰riarvojen pienint‰ et‰isyytt‰
RGB-avaruudessa. Kuvasta voi havaita, ett‰ tasaisissa v‰riliu'uissa kuten
hiuksien takaosassa ja vihre‰ss‰ penkiss‰ n‰kyy raidoittumista v‰rien
vaihtuessa portaittain aina sopivimmalle paletin v‰rille.</td>
<td><a name="kuva_paletista">
3.2 Paletin 256 v‰ri‰ 16x16 ruudun ruudukkona.</a></td>
</tr>

<tr>
<td><img src="kuvat/kuva_paletilla.png" alt="256 v‰rin kuva" /></td>
<td><img src="kuvat/kuvan_paletti.png" alt="256 v‰rin paletti esitettyn‰
kuvana" /></td>
</tr>

<tr>
<td><a name="octree"></a>
3.3 Kokeilu: Kuva, jolle on luotu v‰ripaletti kuten kuvassa 3.1
median cut -menetelm‰ll‰, mutta paletin v‰rit on sovitettu kuvaan k‰ytt‰en
octree-hakupuuta. Octree-sovitus on olennaisesti l‰himm‰n RGB-naapurin
lineaarista etsimist‰ laskennallisesti kevyempi. Tulos on kokonaisuudessan
ala-arvoinen, vaikka octree-sovituskin selv‰sti toimii: v‰ris‰vyt ovat
useimmiten melko l‰hell‰ parasta vaihtoehtoa, mutta eiv‰t silti riitt‰v‰n
l‰hell‰.</td>
<td></td>
</tr>

<tr>
<td><img src="kuvat/octree.png" alt="256 v‰rin kuva octree-sovituksella" />
</td>
<td></td>
</tr>

<tr>
<td colspan="2"><a name="lohkopaletit">4 Kaksi per‰kk‰ist‰ kuvaa pakattuna
v‰hent‰en v‰ri-informaatiota kuvan osa-alueissa.</a> Kuvat 4.1 ja 4.2
esitt‰v‰t jo periaatteessa t‰ydellisesti videonpakkaajalla pakattua ja
purettua kuvasignaalia sellaisena kuin se lopulta n‰kyy.</td>
</tr>

<tr>
<td>4.1 Edellinen kuva, jossa 256 v‰rin paletin j‰lkeen on
16&nbsp;x&nbsp;16 pikselin alueille, "p‰‰lohkoille", luotu lohkokohtainen
paikallinen 16 v‰rin paletti. Lohkopalettien luomisessa on j‰lleen k‰ytetty
median cut -menetelm‰‰.</td>

<td>4.2 Nykyinen kuva purettuna pakatusta videosta. T‰ss‰ on luotu
p‰‰lohkoille 16 v‰rin paletit kuten 4.1:ss‰, ja tallennettu videotiedostoon
vain muuttuvat 8&nbsp;x;nbsp;8 pikselin lohkot. Videota purkauessa
vastaavat lohkot on sitten piirretty 4.1:ss‰ olevan kuvan p‰‰lle.</td>
</tr>

<tr>
<td><img src="kuvat/palettipakkaus+muutokset-0.png" alt="256 v‰rin kuva,
jossa v‰rien m‰‰r‰‰ myˆs lohkojen sis‰ll‰ on rajoitettu median
cut -menetelm‰ll‰" /></td>
<td><img src="kuvat/palettipakkaus+muutokset-1.png" alt="256 v‰rin kuva,
jossa v‰rien m‰‰r‰‰ myˆs lohkojen sis‰ll‰ on rajoitettu median
cut -menetelm‰ll‰, ja tallennettu vain muuttuvat lohkot edelliseen
kuvaan n‰hden" /></td>
</tr>

</table>

<p class="huomautus">Kuvien l‰hde: The Melancholy of Haruhi
Suzumiya &copy; 2006-2007 Nagaru Tanigawa / Noizi Ito / member of SOS</p>

 <hr />
<p>30.11.2008 <a href="mailto:atilante nospam+at cc dot hut dot fi">Artturi
Tilanter‰</a></p>

</body>
</html>
