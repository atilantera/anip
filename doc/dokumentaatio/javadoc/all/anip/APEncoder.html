<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10) on Fri Nov 28 23:32:27 EET 2008 -->
<TITLE>
APEncoder
</TITLE>

<META NAME="date" CONTENT="2008-11-28">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="APEncoder";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/APEncoder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../anip/APDecoder.html" title="class in anip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../anip/APEncoder.PixelEncoder.html" title="class in anip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?anip/APEncoder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="APEncoder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
anip</FONT>
<BR>
Class APEncoder</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>anip.APEncoder</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>APEncoder</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>
 Encoder for AP-format video files.
 </p>
 
 <p>
 Method call order for encoding one file: <code>setFile()</code>,
 <code>setOptions()</code>, then <code>putImage()</code> for all the
 images in their display order, and finally <code>close()</code>. Encoding
 begins when <code>setFile()</code> and <code>setOptions()</code> are
 called, and then putImage() called for the first time.
 </p>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Artturi Tilanterä</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.PixelEncoder.html" title="class in anip">APEncoder.PixelEncoder</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encoder for pixel data.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/mediancut/ArrayMedianCut.html" title="class in anip.mediancut">ArrayMedianCut</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#arrayQuantizer">arrayQuantizer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Median cut color quantizer used in converting a frame into maximum of
 256-color indexed palette.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#BLOCK_CHANGE_THRESOLD">BLOCK_CHANGE_THRESOLD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Minimum color distance in a block where the block is marked to be
 changing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#BLOCK_WIDTH">BLOCK_WIDTH</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Width of a block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockColorsCount">blockColorsCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Table used to count occurrences of the colors of the image palette in
 this.currentMasterBlock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockColorsIndex">blockColorsIndex</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Table used to count occurrences of the colors of the image palette in
 this.currentMasterBlock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockColorsUsed">blockColorsUsed</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of colors actually used in this.blockPalette.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockFullColor">blockFullColor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Small bitmap in fullcolor, for encoding the current master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockPalette">blockPalette</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16 color palette for the current master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#blockPaletteRGB">blockPaletteRGB</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16 color palette for current master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#changedBlocks">changedBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bytemap representing the blocks of the current frame.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#currentMasterBlock">currentMasterBlock</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Small bitmap in indexed color, for encoding the current master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#currentMasterBlockFullColor">currentMasterBlockFullColor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Small bitmap that contains image data of this.currentMasterBlock in RGB
 fullcolor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#encodedFrame">encodedFrame</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data of one encoded frame ready to be written into the file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#encodedFrameLength">encodedFrameLength</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The actual size of current encoded frame in bytes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.RandomAccessFile</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#file">file</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle to the disk I/O.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#fileName">fileName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name of the video file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#fps">fps</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Video playing speed in frames per second.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#frameCount">frameCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of frames in the video.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#frameHeight">frameHeight</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Height of the video image in pixels.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#frameWidth">frameWidth</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Width of the video image in pixels.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#HALF_MASTERBLOCK_AREA">HALF_MASTERBLOCK_AREA</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Half of the area area of a master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#heightInBlocks">heightInBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Height of the image in blocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#heightInMasterBlocks">heightInMasterBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Height of the image in masterblocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;short[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#imagePalette">imagePalette</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;256-color RGB palette for the current frame.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#imageWithPalette">imageWithPalette</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The encoded image with 256 color palette (this.imagePalette).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#isEncoding">isEncoding</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines whether the encoder is ready to accept images and write
 them to a video file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.LinkedList&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#keyFrameAddresses">keyFrameAddresses</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Addresses of the keyframes as bytes from the beginning of the file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/mediancut/ListMedianCut.html" title="class in anip.mediancut">ListMedianCut</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#listQuantizer">listQuantizer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Median cut color quantizer used in converting a master block into maximum
 of 16 color indexed palette.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MASTERBLOCK_AREA">MASTERBLOCK_AREA</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area of a master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MASTERBLOCK_WIDTH">MASTERBLOCK_WIDTH</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Width of a master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MAX_COLORS_IN_BLOCK">MAX_COLORS_IN_BLOCK</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum colors in the local palette of one palette block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MAX_COLORS_IN_IMAGE">MAX_COLORS_IN_IMAGE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum colors in a frame when it is in indexed color mode (has a
 palette).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MAX_KEYFRAME_INTERVAL">MAX_KEYFRAME_INTERVAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum interval between two keyframes in secods.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#medianCutDepth">medianCutDepth</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Depth in bits per color component {R, G, B} in median cut
 palette optimization.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MIN_CHANGE_FOR_KEYFRAME">MIN_CHANGE_FOR_KEYFRAME</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Minimum ratio of changing blocks per all blocks to make
 current frame a keyframe.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#MIN_KEYFRAME_INTERVAL">MIN_KEYFRAME_INTERVAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Minimum interval between two keyframes in secods.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#numberOfChangingBlocks">numberOfChangingBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of value == 1:s in this.changedBlocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#numberOfLastKeyframe">numberOfLastKeyframe</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of last keyframe in frames.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/APEncoder.PixelEncoder.html" title="class in anip">APEncoder.PixelEncoder</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#pixEncoder">pixEncoder</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pixel encoder for pixels of a masterblock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#previousChangedBlocks">previousChangedBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Same as this.changedBlocks, but for previous frame.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#previousFrame">previousFrame</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap representing containing sum of all image changes from the last
 keyframe.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#testImage">testImage</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Image used to test changing block detection and palette creation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#widthInBlocks">widthInBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Width of the image in blocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#widthInMasterBlocks">widthInMasterBlocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Width of the image in masterblocks.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../anip/APEncoder.html#APEncoder()">APEncoder</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new encoder.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#applyBlockPalette()">applyBlockPalette</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Applies block palette created with createBlockPalette() into current
 master block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#applyPalette(anip.Bitmap, anip.Bitmap)">applyPalette</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;fullcolorImage,
             <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;indexedImage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Converts a 24-bit image to an indexed color image.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#beginEncoding(short, short)">beginEncoding</A></B>(short&nbsp;frameWidth,
              short&nbsp;frameHeight)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prepares everything for encoding process.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ends encoding of the video, finalizes and closes the video file that
 was being written.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#compressFramePalette()">compressFramePalette</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compresses this.imagePalette into this.encodedFrame.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#compressMasterBlock(int, int)">compressMasterBlock</A></B>(int&nbsp;startBlockX,
                    int&nbsp;startBlockY)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes a single masterblock into the the compressed data
 buffer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#compressMasterBlockPalette()">compressMasterBlockPalette</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes the palette of the current master block into the
 compresed data buffer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#compressMasterBlockPixels()">compressMasterBlockPixels</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compresses pixel information in this.currentMasterBlock.pixels by run
 length encoding to this.compressedBlock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#compressRegionChanges(boolean)">compressRegionChanges</A></B>(boolean&nbsp;isKeyFrame)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes contents of this.changedBlocks compressed to
 this.encodedFrame.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#copyFullColorBlockDataFromImage(anip.Bitmap, int, int)">copyFullColorBlockDataFromImage</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image,
                                int&nbsp;xCorner,
                                int&nbsp;yCorner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copies fullcolor RGB image data from a fullcolor image to
 this.currentMasterBlockFullColor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#createBlockPalette(int, int)">createBlockPalette</A></B>(int&nbsp;startBlockX,
                   int&nbsp;startBlockY)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates a very limited palette for the current block when the block is
 using the image palette.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#createBlockPaletteMedianCut(int, int)">createBlockPaletteMedianCut</A></B>(int&nbsp;startBlockX,
                            int&nbsp;startBlockY)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates a very limited palette for the current master block when the
 block is using the image palette.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#encodeFrame(anip.Bitmap)">encodeFrame</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encodes a single image as a frame in video stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#findRegionChanges(anip.Bitmap, anip.Bitmap, int)">findRegionChanges</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;firstImage,
                  <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;secondImage,
                  int&nbsp;thresold)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Find changes in blocks between two images.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#hasChangingBlocks(int, int)">hasChangingBlocks</A></B>(int&nbsp;x,
                  int&nbsp;y)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines whether the given masterblock has changing sub-blocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#paintChangedRegions(anip.Bitmap, anip.Bitmap)">paintChangedRegions</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;src,
                    <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;dest)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Paints blocks from source image to destination image according to
 block change information provided by this.changedBlocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#putImage(anip.Bitmap)">putImage</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Begins or continues encoding of the video by adding the image specified
 to the encoded stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#resizeToBlockDivisible(anip.Bitmap)">resizeToBlockDivisible</A></B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adjusts image height and width to be multiples of BLOCK_WIDTH, and
 according to this.heightInBlocks and this.widthInBlocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#setFile(java.lang.String)">setFile</A></B>(java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets name of the AP file for saving the encoded video.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#setFrameSize(short, short)">setFrameSize</A></B>(short&nbsp;width,
             short&nbsp;height)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the width and height of the video image.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#setOptions(float, int)">setOptions</A></B>(float&nbsp;fps,
           int&nbsp;medianCutDepth)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets video encoding and playing options.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../anip/APEncoder.html#writeFrame(boolean)">writeFrame</A></B>(boolean&nbsp;isKeyframe)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes a whole encoded frame created with encodeFrame() to the video
 file.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BLOCK_WIDTH"><!-- --></A><H3>
BLOCK_WIDTH</H3>
<PRE>
private static final int <B>BLOCK_WIDTH</B></PRE>
<DL>
<DD><p>
 Width of a block. A block is a constant sized, square shaped sub-image
 the encoded image consists of.
 </p>
 
 <p>
 SUMMARY OF BLOCKS: The frame, a single image that will be encoded, is
 split into constant-sized squares called master blocks. Master blocks
 consist of smaller squares called blocks. The changes between frames
 are handled in blocks while subsections of frame containing local
 palettes are handled with size of master blocks.
 </p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.BLOCK_WIDTH">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MASTERBLOCK_WIDTH"><!-- --></A><H3>
MASTERBLOCK_WIDTH</H3>
<PRE>
private static final int <B>MASTERBLOCK_WIDTH</B></PRE>
<DL>
<DD>Width of a master block.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MASTERBLOCK_WIDTH">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MASTERBLOCK_AREA"><!-- --></A><H3>
MASTERBLOCK_AREA</H3>
<PRE>
private static final int <B>MASTERBLOCK_AREA</B></PRE>
<DL>
<DD>Area of a master block.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MASTERBLOCK_AREA">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="HALF_MASTERBLOCK_AREA"><!-- --></A><H3>
HALF_MASTERBLOCK_AREA</H3>
<PRE>
private static final int <B>HALF_MASTERBLOCK_AREA</B></PRE>
<DL>
<DD>Half of the area area of a master block.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.HALF_MASTERBLOCK_AREA">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MAX_COLORS_IN_BLOCK"><!-- --></A><H3>
MAX_COLORS_IN_BLOCK</H3>
<PRE>
private static final int <B>MAX_COLORS_IN_BLOCK</B></PRE>
<DL>
<DD>Maximum colors in the local palette of one palette block.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MAX_COLORS_IN_BLOCK">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MAX_COLORS_IN_IMAGE"><!-- --></A><H3>
MAX_COLORS_IN_IMAGE</H3>
<PRE>
private static final int <B>MAX_COLORS_IN_IMAGE</B></PRE>
<DL>
<DD>Maximum colors in a frame when it is in indexed color mode (has a
 palette).
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MAX_COLORS_IN_IMAGE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MAX_KEYFRAME_INTERVAL"><!-- --></A><H3>
MAX_KEYFRAME_INTERVAL</H3>
<PRE>
private static final float <B>MAX_KEYFRAME_INTERVAL</B></PRE>
<DL>
<DD>Maximum interval between two keyframes in secods.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MAX_KEYFRAME_INTERVAL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MIN_KEYFRAME_INTERVAL"><!-- --></A><H3>
MIN_KEYFRAME_INTERVAL</H3>
<PRE>
private static final float <B>MIN_KEYFRAME_INTERVAL</B></PRE>
<DL>
<DD>Minimum interval between two keyframes in secods.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MIN_KEYFRAME_INTERVAL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MIN_CHANGE_FOR_KEYFRAME"><!-- --></A><H3>
MIN_CHANGE_FOR_KEYFRAME</H3>
<PRE>
private static final double <B>MIN_CHANGE_FOR_KEYFRAME</B></PRE>
<DL>
<DD>Minimum ratio of changing blocks per all blocks to make
 current frame a keyframe.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.MIN_CHANGE_FOR_KEYFRAME">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="BLOCK_CHANGE_THRESOLD"><!-- --></A><H3>
BLOCK_CHANGE_THRESOLD</H3>
<PRE>
private static final int <B>BLOCK_CHANGE_THRESOLD</B></PRE>
<DL>
<DD>Minimum color distance in a block where the block is marked to be
 changing. Distance in 256x256x256 RGB space.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#anip.APEncoder.BLOCK_CHANGE_THRESOLD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="isEncoding"><!-- --></A><H3>
isEncoding</H3>
<PRE>
private boolean <B>isEncoding</B></PRE>
<DL>
<DD>Determines whether the encoder is ready to accept images and write
 them to a video file. This also indicates that a file is opened
 in a file system.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="fileName"><!-- --></A><H3>
fileName</H3>
<PRE>
private java.lang.String <B>fileName</B></PRE>
<DL>
<DD>Name of the video file.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="frameWidth"><!-- --></A><H3>
frameWidth</H3>
<PRE>
private short <B>frameWidth</B></PRE>
<DL>
<DD>Width of the video image in pixels.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="frameHeight"><!-- --></A><H3>
frameHeight</H3>
<PRE>
private short <B>frameHeight</B></PRE>
<DL>
<DD>Height of the video image in pixels.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="fps"><!-- --></A><H3>
fps</H3>
<PRE>
private float <B>fps</B></PRE>
<DL>
<DD>Video playing speed in frames per second.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="frameCount"><!-- --></A><H3>
frameCount</H3>
<PRE>
private int <B>frameCount</B></PRE>
<DL>
<DD>Number of frames in the video. Counter.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="medianCutDepth"><!-- --></A><H3>
medianCutDepth</H3>
<PRE>
private int <B>medianCutDepth</B></PRE>
<DL>
<DD>Depth in bits per color component {R, G, B} in median cut
 palette optimization.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="file"><!-- --></A><H3>
file</H3>
<PRE>
private java.io.RandomAccessFile <B>file</B></PRE>
<DL>
<DD>Handle to the disk I/O.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="keyFrameAddresses"><!-- --></A><H3>
keyFrameAddresses</H3>
<PRE>
private java.util.LinkedList&lt;java.lang.Integer&gt; <B>keyFrameAddresses</B></PRE>
<DL>
<DD>Addresses of the keyframes as bytes from the beginning of the file.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="encodedFrame"><!-- --></A><H3>
encodedFrame</H3>
<PRE>
private byte[] <B>encodedFrame</B></PRE>
<DL>
<DD>Data of one encoded frame ready to be written into the file.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="encodedFrameLength"><!-- --></A><H3>
encodedFrameLength</H3>
<PRE>
private int <B>encodedFrameLength</B></PRE>
<DL>
<DD>The actual size of current encoded frame in bytes.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="numberOfLastKeyframe"><!-- --></A><H3>
numberOfLastKeyframe</H3>
<PRE>
private int <B>numberOfLastKeyframe</B></PRE>
<DL>
<DD>Number of last keyframe in frames.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="imagePalette"><!-- --></A><H3>
imagePalette</H3>
<PRE>
private short[] <B>imagePalette</B></PRE>
<DL>
<DD>256-color RGB palette for the current frame.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="imageWithPalette"><!-- --></A><H3>
imageWithPalette</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>imageWithPalette</B></PRE>
<DL>
<DD>The encoded image with 256 color palette (this.imagePalette).
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="widthInBlocks"><!-- --></A><H3>
widthInBlocks</H3>
<PRE>
private int <B>widthInBlocks</B></PRE>
<DL>
<DD>Width of the image in blocks.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="heightInBlocks"><!-- --></A><H3>
heightInBlocks</H3>
<PRE>
private int <B>heightInBlocks</B></PRE>
<DL>
<DD>Height of the image in blocks.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="widthInMasterBlocks"><!-- --></A><H3>
widthInMasterBlocks</H3>
<PRE>
private int <B>widthInMasterBlocks</B></PRE>
<DL>
<DD>Width of the image in masterblocks.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="heightInMasterBlocks"><!-- --></A><H3>
heightInMasterBlocks</H3>
<PRE>
private int <B>heightInMasterBlocks</B></PRE>
<DL>
<DD>Height of the image in masterblocks.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="changedBlocks"><!-- --></A><H3>
changedBlocks</H3>
<PRE>
private byte[] <B>changedBlocks</B></PRE>
<DL>
<DD>Bytemap representing the blocks of the current frame. Size is
 this.widthInBlocks * this.heightInBlocks. Values are: 0 = block contains
 exactly the same pixel values as the block in the same position in the
 previous frame; 1 = block is different from the corresponding block in
 the previous frame.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="numberOfChangingBlocks"><!-- --></A><H3>
numberOfChangingBlocks</H3>
<PRE>
private int <B>numberOfChangingBlocks</B></PRE>
<DL>
<DD>Number of value == 1:s in this.changedBlocks.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="previousChangedBlocks"><!-- --></A><H3>
previousChangedBlocks</H3>
<PRE>
private byte[] <B>previousChangedBlocks</B></PRE>
<DL>
<DD>Same as this.changedBlocks, but for previous frame.
 Used by compressRegionChanges().
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="previousFrame"><!-- --></A><H3>
previousFrame</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>previousFrame</B></PRE>
<DL>
<DD>Bitmap representing containing sum of all image changes from the last
 keyframe. It is used to detect changing blocks in the current frame. The
 advantage of storing sum the all the changes since last keyframe is that
 then even the slight changes that occur between several images will be
 encoded when the thresold is reached, if the change between two adjacent
 frames was below the thresold. For further information see the methods
 where this field is actually used.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="testImage"><!-- --></A><H3>
testImage</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>testImage</B></PRE>
<DL>
<DD>Image used to test changing block detection and palette creation.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockPalette"><!-- --></A><H3>
blockPalette</H3>
<PRE>
private short[] <B>blockPalette</B></PRE>
<DL>
<DD>16 color palette for the current master block. Values are indices of
 this.imagePalette.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockPaletteRGB"><!-- --></A><H3>
blockPaletteRGB</H3>
<PRE>
private short[] <B>blockPaletteRGB</B></PRE>
<DL>
<DD>16 color palette for current master block. Values are RGB RGB .. copied
 from imagePalette.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="currentMasterBlock"><!-- --></A><H3>
currentMasterBlock</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>currentMasterBlock</B></PRE>
<DL>
<DD>Small bitmap in indexed color, for encoding the current master block.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="currentMasterBlockFullColor"><!-- --></A><H3>
currentMasterBlockFullColor</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>currentMasterBlockFullColor</B></PRE>
<DL>
<DD>Small bitmap that contains image data of this.currentMasterBlock in RGB
 fullcolor.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockFullColor"><!-- --></A><H3>
blockFullColor</H3>
<PRE>
private <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A> <B>blockFullColor</B></PRE>
<DL>
<DD>Small bitmap in fullcolor, for encoding the current master block. NOTE:
 size of this bitmap is BLOCK_WIDTH * BLOCK_WIDTH. It represents a single
 quarter of the current master block.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockColorsIndex"><!-- --></A><H3>
blockColorsIndex</H3>
<PRE>
private short[] <B>blockColorsIndex</B></PRE>
<DL>
<DD>Table used to count occurrences of the colors of the image palette in
 this.currentMasterBlock. See createBlockPalette().
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockColorsCount"><!-- --></A><H3>
blockColorsCount</H3>
<PRE>
private short[] <B>blockColorsCount</B></PRE>
<DL>
<DD>Table used to count occurrences of the colors of the image palette in
 this.currentMasterBlock. See createBlockPalette().
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="blockColorsUsed"><!-- --></A><H3>
blockColorsUsed</H3>
<PRE>
private int <B>blockColorsUsed</B></PRE>
<DL>
<DD>Number of colors actually used in this.blockPalette.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="arrayQuantizer"><!-- --></A><H3>
arrayQuantizer</H3>
<PRE>
private <A HREF="../anip/mediancut/ArrayMedianCut.html" title="class in anip.mediancut">ArrayMedianCut</A> <B>arrayQuantizer</B></PRE>
<DL>
<DD>Median cut color quantizer used in converting a frame into maximum of
 256-color indexed palette.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="listQuantizer"><!-- --></A><H3>
listQuantizer</H3>
<PRE>
private <A HREF="../anip/mediancut/ListMedianCut.html" title="class in anip.mediancut">ListMedianCut</A> <B>listQuantizer</B></PRE>
<DL>
<DD>Median cut color quantizer used in converting a master block into maximum
 of 16 color indexed palette.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="pixEncoder"><!-- --></A><H3>
pixEncoder</H3>
<PRE>
private <A HREF="../anip/APEncoder.PixelEncoder.html" title="class in anip">APEncoder.PixelEncoder</A> <B>pixEncoder</B></PRE>
<DL>
<DD>Pixel encoder for pixels of a masterblock.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="APEncoder()"><!-- --></A><H3>
APEncoder</H3>
<PRE>
public <B>APEncoder</B>()</PRE>
<DL>
<DD>Constructs a new encoder.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setFile(java.lang.String)"><!-- --></A><H3>
setFile</H3>
<PRE>
public void <B>setFile</B>(java.lang.String&nbsp;fileName)
             throws java.io.IOException</PRE>
<DL>
<DD>Sets name of the AP file for saving the encoded video.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileName</CODE> - name of the AP file to write.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setOptions(float, int)"><!-- --></A><H3>
setOptions</H3>
<PRE>
public void <B>setOptions</B>(float&nbsp;fps,
                       int&nbsp;medianCutDepth)
                throws java.io.IOException</PRE>
<DL>
<DD>Sets video encoding and playing options.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fps</CODE> - video playing speed in frames per second.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="putImage(anip.Bitmap)"><!-- --></A><H3>
putImage</H3>
<PRE>
public void <B>putImage</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)
              throws java.io.IOException</PRE>
<DL>
<DD>Begins or continues encoding of the video by adding the image specified
 to the encoded stream. Finally writes this addition to the video stream
 to the disk. Decides the frame size according to the proportions of the
 first image.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>image</CODE> - image of the next frame.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>Ends encoding of the video, finalizes and closes the video file that
 was being written.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="beginEncoding(short, short)"><!-- --></A><H3>
beginEncoding</H3>
<PRE>
private void <B>beginEncoding</B>(short&nbsp;frameWidth,
                           short&nbsp;frameHeight)
                    throws java.io.IOException</PRE>
<DL>
<DD>Prepares everything for encoding process.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>frameWidth</CODE> - width of the video image in pixels.<DD><CODE>frameHeight</CODE> - height of the video image in pixels.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setFrameSize(short, short)"><!-- --></A><H3>
setFrameSize</H3>
<PRE>
private void <B>setFrameSize</B>(short&nbsp;width,
                          short&nbsp;height)</PRE>
<DL>
<DD>Sets the width and height of the video image.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>width</CODE> - width of the video image in pixels.<DD><CODE>height</CODE> - height of the video image in pixels.</DL>
</DD>
</DL>
<HR>

<A NAME="encodeFrame(anip.Bitmap)"><!-- --></A><H3>
encodeFrame</H3>
<PRE>
private void <B>encodeFrame</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)
                  throws java.io.IOException</PRE>
<DL>
<DD>Encodes a single image as a frame in video stream.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>image</CODE> - bitmap image to be encoded.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="writeFrame(boolean)"><!-- --></A><H3>
writeFrame</H3>
<PRE>
private void <B>writeFrame</B>(boolean&nbsp;isKeyframe)
                 throws java.io.IOException</PRE>
<DL>
<DD>Writes a whole encoded frame created with encodeFrame() to the video
 file.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>isKeyframe</CODE> - determines whether the frame is a keyframe.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="compressFramePalette()"><!-- --></A><H3>
compressFramePalette</H3>
<PRE>
private void <B>compressFramePalette</B>()</PRE>
<DL>
<DD>Compresses this.imagePalette into this.encodedFrame.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="compressRegionChanges(boolean)"><!-- --></A><H3>
compressRegionChanges</H3>
<PRE>
private void <B>compressRegionChanges</B>(boolean&nbsp;isKeyFrame)</PRE>
<DL>
<DD>Writes contents of this.changedBlocks compressed to
 this.encodedFrame.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="resizeToBlockDivisible(anip.Bitmap)"><!-- --></A><H3>
resizeToBlockDivisible</H3>
<PRE>
private void <B>resizeToBlockDivisible</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image)</PRE>
<DL>
<DD>Adjusts image height and width to be multiples of BLOCK_WIDTH, and
 according to this.heightInBlocks and this.widthInBlocks. This means
 black margins are added to the right and bottom size of the image if
 necessary.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>image</CODE> - image to be resized.</DL>
</DD>
</DL>
<HR>

<A NAME="findRegionChanges(anip.Bitmap, anip.Bitmap, int)"><!-- --></A><H3>
findRegionChanges</H3>
<PRE>
private void <B>findRegionChanges</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;firstImage,
                               <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;secondImage,
                               int&nbsp;thresold)</PRE>
<DL>
<DD><p>
 Find changes in blocks between two images. Stores results into
 this.changedBlocks. Image width and height must be multiples of
 BLOCK_WIDTH.
 </p>
 
 <p>
 Detecting changes in blocks goes as following: compare block pixel by
 pixel calculating color differences between the two images. Color
 difference of two pixels is
 <code>sqrt( (r2 - r1)^2 + (g2 - g1)^2 + (b2 - b1)^2 )</code> where
 <code>sqrt</code> is square root and <code>^2</code> raising to the
 second power. If at least one of the pixels in the block has color
 difference that is equal or greater than thresold, then the block is
 marked to be changing.
 </p>
 
 <p>
 The actual implementation does not calculate square roots but rather
 compares power-sum expression of the distance to the thresold squared.
 Comparing of pixels in one block ends immediately if enough great
 difference is found.
 </p>
 
 <p>
 <b>Note:</b> It seems the optimal value for <code>thresold</code> is
 8.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>firstImage</CODE> - image to be compared.<DD><CODE>secondImage</CODE> - image to be compared.<DD><CODE>thresold</CODE> - lowest color distance on which the block is marked to be
            changing.</DL>
</DD>
</DL>
<HR>

<A NAME="hasChangingBlocks(int, int)"><!-- --></A><H3>
hasChangingBlocks</H3>
<PRE>
private boolean <B>hasChangingBlocks</B>(int&nbsp;x,
                                  int&nbsp;y)</PRE>
<DL>
<DD>Determines whether the given masterblock has changing sub-blocks.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="compressMasterBlock(int, int)"><!-- --></A><H3>
compressMasterBlock</H3>
<PRE>
private void <B>compressMasterBlock</B>(int&nbsp;startBlockX,
                                 int&nbsp;startBlockY)</PRE>
<DL>
<DD>Writes a single masterblock into the the compressed data
 buffer.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="compressMasterBlockPalette()"><!-- --></A><H3>
compressMasterBlockPalette</H3>
<PRE>
private void <B>compressMasterBlockPalette</B>()</PRE>
<DL>
<DD>Writes the palette of the current master block into the
 compresed data buffer. Compresses the palette if possible.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="compressMasterBlockPixels()"><!-- --></A><H3>
compressMasterBlockPixels</H3>
<PRE>
private void <B>compressMasterBlockPixels</B>()</PRE>
<DL>
<DD>Compresses pixel information in this.currentMasterBlock.pixels by run
 length encoding to this.compressedBlock.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="applyPalette(anip.Bitmap, anip.Bitmap)"><!-- --></A><H3>
applyPalette</H3>
<PRE>
private void <B>applyPalette</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;fullcolorImage,
                          <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;indexedImage)</PRE>
<DL>
<DD>Converts a 24-bit image to an indexed color image. Determines fittest
 color for a pixel by shortest distance in the RGB color space.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fullcolorImage</CODE> - 24-bit image with pixel values RGB RGB ..<DD><CODE>indexedImage</CODE> - image with 256 color indexed palette.</DL>
</DD>
</DL>
<HR>

<A NAME="createBlockPalette(int, int)"><!-- --></A><H3>
createBlockPalette</H3>
<PRE>
private void <B>createBlockPalette</B>(int&nbsp;startBlockX,
                                int&nbsp;startBlockY)</PRE>
<DL>
<DD>Generates a very limited palette for the current block when the block is
 using the image palette. If number of the colors in the block need to be
 reduced, uses ListMedianCut for palette creation.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>startBlockX</CODE> - offset in blocks (not masterblocks) from the left edge of the
            image.<DD><CODE>startBlockY</CODE> - offset in blocks (not masterblocks) from the top edge of the
            image.</DL>
</DD>
</DL>
<HR>

<A NAME="createBlockPaletteMedianCut(int, int)"><!-- --></A><H3>
createBlockPaletteMedianCut</H3>
<PRE>
private void <B>createBlockPaletteMedianCut</B>(int&nbsp;startBlockX,
                                         int&nbsp;startBlockY)</PRE>
<DL>
<DD>Generates a very limited palette for the current master block when the
 block is using the image palette. Uses ListMedianCut for palette
 creation.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>startBlockX</CODE> - offset in blocks (not masterblocks) from the left
 edge of the image.<DD><CODE>startBlockY</CODE> - offset in blocks (not masterblocks) from the top
 edge of the image.</DL>
</DD>
</DL>
<HR>

<A NAME="applyBlockPalette()"><!-- --></A><H3>
applyBlockPalette</H3>
<PRE>
private void <B>applyBlockPalette</B>()</PRE>
<DL>
<DD>Applies block palette created with createBlockPalette() into current
 master block. NOTE: After calling this method indices of
 currentMasterBlock.pixels[] are indices of blockPalette, not
 imagePalette.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="copyFullColorBlockDataFromImage(anip.Bitmap, int, int)"><!-- --></A><H3>
copyFullColorBlockDataFromImage</H3>
<PRE>
private void <B>copyFullColorBlockDataFromImage</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;image,
                                             int&nbsp;xCorner,
                                             int&nbsp;yCorner)</PRE>
<DL>
<DD>Copies fullcolor RGB image data from a fullcolor image to
 this.currentMasterBlockFullColor.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>image</CODE> - image in 24-bit RGB fullcolor.<DD><CODE>xCorner</CODE> - the left edge of the block.<DD><CODE>yCorner</CODE> - the top edge of the block.</DL>
</DD>
</DL>
<HR>

<A NAME="paintChangedRegions(anip.Bitmap, anip.Bitmap)"><!-- --></A><H3>
paintChangedRegions</H3>
<PRE>
private void <B>paintChangedRegions</B>(<A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;src,
                                 <A HREF="../anip/Bitmap.html" title="class in anip">Bitmap</A>&nbsp;dest)</PRE>
<DL>
<DD>Paints blocks from source image to destination image according to
 block change information provided by this.changedBlocks. Image width
 and height must be multiples of BLOCK_WIDTH. Both images must be in
 RGB fullcolor mode.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>src</CODE> - image containing blocks to be painted.<DD><CODE>dest</CODE> - image on where the changed blocks are painted.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/APEncoder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../anip/APDecoder.html" title="class in anip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../anip/APEncoder.PixelEncoder.html" title="class in anip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?anip/APEncoder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="APEncoder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
